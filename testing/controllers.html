<!DOCTYPE html>
<html class="writer-html5" lang="es" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Controladores de prueba &mdash; documentación de Higgs - 7.0.2</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=67a8c293" />
      <link rel="stylesheet" type="text/css" href="../_static/css/citheme.css?v=d9728d44" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://higgs.com.co/testing/controllers.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=e20d7d46"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/translations.js?v=efdbd0b9"></script>
        <script src="../_static/js/citheme.js?v=e0bcfc84"></script>
        <script src="../_static/js/carbon.js?v=693e881e"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="next" title="Prueba de funciones HTTP" href="feature.html" />
    <link rel="prev" title="Generando datos de prueba" href="fabricator.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo.svg" class="logo" alt="Logotipo"/>
          </a>
              <div class="version">
                7.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Buscar documentos" aria-label="Buscar documentos" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Bienvenido a Higgs (AI)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/hmvc.html">HMVC (Hierarchical Model-View-Controller)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/psr.html">Cumplimiento de PSR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../license.html">Acuerdo de licencia</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Instalación</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/installing_composer.html">Compositor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/installing_manual.html">Instalación manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/running.html">Ejecutando su aplicación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/troubleshooting.html">Solución de problemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelogs/index.html">Registro de Cambios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/upgrading.html">Actualizaciones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/repositories.html">Repositorios</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Cree su primera aplicación</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/static_pages.html">Páginas estáticas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/news_section.html">Sección de noticias</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/create_news_items.html">Crear noticias</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/conclusion.html">Conclusión</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/index.html">Descripción general del Higgs (AI)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/structure.html">Application Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/mvc.html">Modelos, vistas y controladores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/autoloader.html">Archivos de carga automática</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/services.html">Servicios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/factories.html">Fábricas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/http.html">Trabajar con solicitudes HTTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/security.html">Pautas de seguridad</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../general/index.html">Temas generales</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../general/configuration.html">Configuración en Higgs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/urls.html">URL de Higgs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/helpers.html">Funciones auxiliares</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/common_functions.html">Funciones y constantes globales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/logging.html">Información de registro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/errors.html">Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/caching.html">Almacenamiento en caché de páginas web</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/ajax.html">Solicitudes AJAX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/modules.html">Módulos de código</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/managing_apps.html">Administrar sus aplicaciones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/environments.html">Manejo de múltiples entornos</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../incoming/index.html">Controllers and Routing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../incoming/routing.html">Enrutamiento URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/controllers.html">Controladores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/filters.html">Filtros del controlador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/message.html">Mensajes HTTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/request.html">Solicitar clase</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/incomingrequest.html">IncomingRequest Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/content_negotiation.html">Content Negotiation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/methodspoofing.html">Suplantación de método HTTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/restful.html">Manejo de recursos RESTful</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../outgoing/index.html">Construyendo respuestas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/views.html">Puntos de vista</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_cells.html">Ver celdas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_renderer.html">Ver renderizador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_layouts.html">Ver diseños</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_parser.html">Ver analizador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_decorators.html">Ver decoradores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/table.html">Clase de tabla HTML</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/response.html">HTTP Responses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/api_responses.html">Rasgo de respuesta API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/csp.html">Política de seguridad de contenidos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/localization.html">Localización</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/alternative_php.html">Sintaxis PHP alternativa para ver archivos</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../database/index.html">Trabajar con bases de datos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../database/examples.html">Inicio rápido: ejemplos de uso</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/configuration.html">Configuración de base de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/connecting.html">Conexión a una base de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/queries.html">Ejecución de consultas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/results.html">Generando resultados de consulta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/helpers.html">Funciones auxiliares de consulta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/query_builder.html">Clase de generador de consultas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/transactions.html">Actas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/metadata.html">Obtener metadatos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/call_function.html">Llamadas a funciones personalizadas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/events.html">Eventos de base de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/utilities.html">Utilidades de base de datos</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../models/index.html">Datos de modelado</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../models/model.html">Usando el modelo de Higgs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../models/entities.html">Usando clases de entidad</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dbmgmt/index.html">Administrar bases de datos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/forge.html">Manipulación de bases de datos con Database Forge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/migration.html">Migraciones de bases de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/seeds.html">Siembra de base de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/db_commands.html">Comandos de base de datos</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../libraries/index.html">Referencia de la biblioteca</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../libraries/caching.html">Controlador de almacenamiento en caché</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/cookies.html">Galletas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/curlrequest.html">Clase de solicitud CURL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/email.html">Clase de correo electrónico</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/encryption.html">Servicio de cifrado</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/files.html">Trabajar con archivos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/file_collections.html">Colecciones de archivos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/honeypot.html">clase de miel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/images.html">Clase de manipulación de imágenes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/pagination.html">Paginación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/publisher.html">Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/security.html">Seguridad</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/sessions.html">Biblioteca de sesiones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/throttler.html">acelerador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/time.html">Horarios y fechas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/typography.html">Tipografía</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uploaded_files.html">Trabajar con archivos cargados</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uri.html">Creando instancias de URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uri.html#cadenas-uri">Cadenas URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uri.html#las-partes-de-uri">Las partes de URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uri.html#segmentos-uri">Segmentos URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uri.html#deshabilitar-el-lanzamiento-de-excepciones">Deshabilitar el lanzamiento de excepciones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/user_agent.html">Clase de agente de usuario</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/validation.html">Validation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../helpers/index.html">Ayudantes</a><ul class="simple">
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Pruebas</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="database.html">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="fabricator.html">Generating Data</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Controller Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="feature.html">HTTP Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="response.html">Respuestas de prueba</a></li>
<li class="toctree-l2"><a class="reference internal" href="mocking.html">Mocking</a></li>
<li class="toctree-l2"><a class="reference internal" href="benchmark.html">Evaluación comparativa</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Depurando su aplicación</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Uso de la línea de comando</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_overview.html">Descripción general de la CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_controllers.html">Ejecución de controladores a través de CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/spark_commands.html">Comandos de chispa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_commands.html">Crear comandos Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_generators.html">Generadores CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_library.html">CLI Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_request.html">Clase de solicitud CLI</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../extending/index.html">Higgs extendido</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../extending/core_classes.html">Crear clases de sistema central</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/common.html">Reemplazo de funciones comunes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/events.html">Eventos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/basecontroller.html">Ampliación del controlador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/authentication.html">Autenticación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/composer_packages.html">Crear paquetes de compositor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/contributing.html">Contribuyendo al Higgs</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../libraries/official_packages.html">Paquetes Oficiales</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Higgs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Pruebas</a></li>
      <li class="breadcrumb-item active">Controladores de prueba</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="controladores-de-prueba">
<h1>Controladores de prueba<a class="headerlink" href="#controladores-de-prueba" title="Link to this heading"></a></h1>
<p>Probar sus controladores se hace más conveniente con un par de nuevas clases y rasgos de ayuda. Al probar los controladores,
puede ejecutar el código dentro de un controlador, sin ejecutar primero todo el proceso de arranque de la aplicación.
Muchas veces, usando las <a class="reference internal" href="feature.html"><span class="doc">Herramientas de prueba de funciones</span></a> será más simple, pero esta funcionalidad está aquí en
caso que lo necesites.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Because the entire framework has not been bootstrapped, there will be times when you cannot test a controller
Por aquí.</p>
</div>
<nav class="contents local" id="contenido">
<ul class="simple">
<li><p><a class="reference internal" href="#el-rasgo-del-ayudante" id="id2">El rasgo del ayudante</a></p></li>
<li><p><a class="reference internal" href="#metodos-auxiliares" id="id3">Métodos auxiliares</a></p>
<ul>
<li><p><a class="reference internal" href="#controlador-clase" id="id4">controlador($clase)</a></p></li>
<li><p><a class="reference internal" href="#ejecutar-cadena-metodo-parametros" id="id5">ejecutar(cadena $método, …$parámetros)</a></p></li>
<li><p><a class="reference internal" href="#con-configuracion-configuracion" id="id6">con configuración ($ configuración)</a></p></li>
<li><p><a class="reference internal" href="#withrequest-solicitud" id="id7">withRequest($solicitud)</a></p></li>
<li><p><a class="reference internal" href="#withresponse-respuesta" id="id8">withResponse($respuesta)</a></p></li>
<li><p><a class="reference internal" href="#withlogger-logger" id="id9">withLogger($logger)</a></p></li>
<li><p><a class="reference internal" href="#withuri-cadena-uri" id="id10">withURI(cadena $uri)</a></p></li>
<li><p><a class="reference internal" href="#withbody-cuerpo" id="id11">withBody($cuerpo)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#comprobando-la-respuesta" id="id12">Comprobando la respuesta</a></p></li>
<li><p><a class="reference internal" href="#prueba-de-filtro" id="id13">Prueba de filtro</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id14">El rasgo del ayudante</a></p></li>
<li><p><a class="reference internal" href="#configuracion" id="id15">Configuración</a></p></li>
<li><p><a class="reference internal" href="#comprobacion-de-rutas" id="id16">Comprobación de rutas</a></p></li>
<li><p><a class="reference internal" href="#llamar-a-metodos-de-filtro" id="id17">Llamar a métodos de filtro</a></p></li>
<li><p><a class="reference internal" href="#afirmaciones" id="id18">Afirmaciones</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="el-rasgo-del-ayudante">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">El rasgo del ayudante</a><a class="headerlink" href="#el-rasgo-del-ayudante" title="Link to this heading"></a></h2>
<p>Para habilitar las pruebas de controlador, necesita usar el rasgo <code class="docutils literal notranslate"><span class="pre">ControllerTestTrait</span></code> dentro de sus pruebas:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Controllers</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Higgs\Test\CIUnitTestCase</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Higgs\Test\ControllerTestTrait</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Higgs\Test\DatabaseTestTrait</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">FooControllerTest</span> <span class="k">extends</span> <span class="nx">CIUnitTestCase</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">ControllerTestTrait</span><span class="p">;</span>
    <span class="k">use</span> <span class="nx">DatabaseTestTrait</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Una vez que se ha incluido el rasgo, puede comenzar a configurar el entorno, incluidas las clases de solicitud y respuesta,
el cuerpo de la solicitud, URI y más. Usted especifica el controlador a usar con el método <code class="docutils literal notranslate"><span class="pre">controller()</span></code>, pasando el
nombre de clase completo de su controlador. Finalmente, llame al método <code class="docutils literal notranslate"><span class="pre">execute()</span></code> con el nombre del método.
para ejecutar como parámetro:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Controllers</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Higgs\Test\CIUnitTestCase</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Higgs\Test\ControllerTestTrait</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Higgs\Test\DatabaseTestTrait</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ForumControllerTest</span> <span class="k">extends</span> <span class="nx">CIUnitTestCase</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">ControllerTestTrait</span><span class="p">;</span>
    <span class="k">use</span> <span class="nx">DatabaseTestTrait</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">testShowCategories</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">withURI</span><span class="p">(</span><span class="s1">&#39;http://example.com/categories&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">controller</span><span class="p">(</span><span class="nx">ForumController</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">execute</span><span class="p">(</span><span class="s1">&#39;showCategories&#39;</span><span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertTrue</span><span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">isOK</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="metodos-auxiliares">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Métodos auxiliares</a><a class="headerlink" href="#metodos-auxiliares" title="Link to this heading"></a></h2>
<section id="controlador-clase">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">controlador($clase)</a><a class="headerlink" href="#controlador-clase" title="Link to this heading"></a></h3>
<p>Especifica el nombre de clase del controlador a probar. El primer parámetro debe ser un nombre de clase completo.
(es decir, incluya el espacio de nombres):</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">controller</span><span class="p">(</span><span class="nx">\App\Controllers\ForumController</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="ejecutar-cadena-metodo-parametros">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">ejecutar(cadena $método, …$parámetros)</a><a class="headerlink" href="#ejecutar-cadena-metodo-parametros" title="Link to this heading"></a></h3>
<p>Ejecuta el método especificado dentro del controlador. El primer parámetro es el nombre del método a ejecutar:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$results</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">controller</span><span class="p">(</span><span class="nx">\App\Controllers\ForumController</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">execute</span><span class="p">(</span><span class="s1">&#39;showCategories&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Al especificar el segundo parámetro y los siguientes, puede pasarlos al método del controlador.</p>
<p>Esto devuelve una nueva clase auxiliar que proporciona una serie de rutinas para comprobar la respuesta misma. Vea abajo
para detalles.</p>
</section>
<section id="con-configuracion-configuracion">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">con configuración ($ configuración)</a><a class="headerlink" href="#con-configuracion-configuracion" title="Link to this heading"></a></h3>
<p>Le permite pasar una versión modificada de <strong>app/Config/App.php</strong> para probar con diferentes configuraciones:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$config</span>              <span class="o">=</span> <span class="k">new</span> <span class="nx">\Config\App</span><span class="p">();</span>
<span class="nv">$config</span><span class="o">-&gt;</span><span class="na">appTimezone</span> <span class="o">=</span> <span class="s1">&#39;America/Chicago&#39;</span><span class="p">;</span>

<span class="nv">$results</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">withConfig</span><span class="p">(</span><span class="nv">$config</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">controller</span><span class="p">(</span><span class="nx">\App\Controllers\ForumController</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">execute</span><span class="p">(</span><span class="s1">&#39;showCategories&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Si no proporciona uno, se utilizará el archivo de configuración de la aplicación de la aplicación.</p>
</section>
<section id="withrequest-solicitud">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">withRequest($solicitud)</a><a class="headerlink" href="#withrequest-solicitud" title="Link to this heading"></a></h3>
<p>Le permite proporcionar una instancia <strong>IncomingRequest</strong> adaptada a sus necesidades de prueba:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Higgs\HTTP\IncomingRequest</span><span class="p">(</span>
    <span class="k">new</span> <span class="nx">\Config\App</span><span class="p">(),</span>
    <span class="k">new</span> <span class="nx">\Higgs\HTTP\URI</span><span class="p">(</span><span class="s1">&#39;http://example.com&#39;</span><span class="p">),</span>
    <span class="k">null</span><span class="p">,</span>
    <span class="k">new</span> <span class="nx">\Higgs\HTTP\UserAgent</span><span class="p">()</span>
<span class="p">);</span>

<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">setLocale</span><span class="p">(</span><span class="nv">$locale</span><span class="p">);</span>

<span class="nv">$results</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">withRequest</span><span class="p">(</span><span class="nv">$request</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">controller</span><span class="p">(</span><span class="nx">\App\Controllers\ForumController</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">execute</span><span class="p">(</span><span class="s1">&#39;showCategories&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Si no proporciona uno, se pasará una nueva instancia de IncomingRequest con los valores predeterminados de la aplicación.
en su controlador.</p>
</section>
<section id="withresponse-respuesta">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">withResponse($respuesta)</a><a class="headerlink" href="#withresponse-respuesta" title="Link to this heading"></a></h3>
<p>Le permite proporcionar una instancia de <strong>Respuesta</strong>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Higgs\HTTP\Response</span><span class="p">(</span><span class="k">new</span> <span class="nx">\Config\App</span><span class="p">());</span>

<span class="nv">$results</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">withResponse</span><span class="p">(</span><span class="nv">$response</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">controller</span><span class="p">(</span><span class="nx">\App\Controllers\ForumController</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">execute</span><span class="p">(</span><span class="s1">&#39;showCategories&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Si no proporciona una, se pasará una nueva instancia de respuesta con los valores predeterminados de la aplicación.
en su controlador.</p>
</section>
<section id="withlogger-logger">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">withLogger($logger)</a><a class="headerlink" href="#withlogger-logger" title="Link to this heading"></a></h3>
<p>Le permite proporcionar una instancia de <strong>Logger</strong>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$logger</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Higgs\Log\Handlers\FileHandler</span><span class="p">();</span>

<span class="nv">$results</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">withResponse</span><span class="p">(</span><span class="nv">$response</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">withLogger</span><span class="p">(</span><span class="nv">$logger</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">controller</span><span class="p">(</span><span class="nx">\App\Controllers\ForumController</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">execute</span><span class="p">(</span><span class="s1">&#39;showCategories&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Si no proporciona uno, se pasará una nueva instancia de Logger con los valores de configuración predeterminados.
en su controlador.</p>
</section>
<section id="withuri-cadena-uri">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">withURI(cadena $uri)</a><a class="headerlink" href="#withuri-cadena-uri" title="Link to this heading"></a></h3>
<p>Le permite proporcionar un nuevo URI que simule la URL que visitaba el cliente cuando se ejecutó este controlador.
Esto es útil si necesita verificar segmentos de URI dentro de su controlador. El único parámetro es una cadena.
representando un URI válido:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$results</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">withURI</span><span class="p">(</span><span class="s1">&#39;http://example.com/forums/categories&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">controller</span><span class="p">(</span><span class="nx">\App\Controllers\ForumController</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">execute</span><span class="p">(</span><span class="s1">&#39;showCategories&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Es una buena práctica proporcionar siempre el URI durante las pruebas para evitar sorpresas.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Since v7.4.0, this method creates a new Request instance with the URI.
Porque la instancia de Solicitud debería tener la instancia de URI. También si el nombre de host
en la cadena URI no es válida con <code class="docutils literal notranslate"><span class="pre">Config\App</span></code>, el nombre de host válido será
colocar.</p>
</div>
</section>
<section id="withbody-cuerpo">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">withBody($cuerpo)</a><a class="headerlink" href="#withbody-cuerpo" title="Link to this heading"></a></h3>
<p>Le permite proporcionar un cuerpo personalizado para la solicitud. Esto puede resultar útil al probar controladores API donde
debe establecer un valor JSON como cuerpo. El único parámetro es una cadena que representa el cuerpo de la solicitud:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$body</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bar&#39;</span><span class="p">]);</span>

<span class="nv">$results</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">withBody</span><span class="p">(</span><span class="nv">$body</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">controller</span><span class="p">(</span><span class="nx">\App\Controllers\ForumController</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">execute</span><span class="p">(</span><span class="s1">&#39;showCategories&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="comprobando-la-respuesta">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Comprobando la respuesta</a><a class="headerlink" href="#comprobando-la-respuesta" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ControllerTestTrait::execute()</span></code> devuelve una instancia de <code class="docutils literal notranslate"><span class="pre">TestResponse</span></code>. Ver <a class="reference internal" href="response.html"><span class="doc">Respuestas de prueba</span></a>  en
cómo utilizar esta clase para realizar afirmaciones y verificaciones adicionales en sus casos de prueba.</p>
</section>
<section id="prueba-de-filtro">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Prueba de filtro</a><a class="headerlink" href="#prueba-de-filtro" title="Link to this heading"></a></h2>
<p>Similar a Controller Testing, el marco proporciona herramientas para ayudar a crear pruebas para
personalizado <a class="reference internal" href="../incoming/filters.html"><span class="doc">Filtros</span></a>  y sus proyectos los utilizan en el enrutamiento.</p>
<section id="id1">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">El rasgo del ayudante</a><a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>Al igual que con el Probador del controlador, debe incluir <code class="docutils literal notranslate"><span class="pre">FilterTestTrait</span></code> en su prueba.
casos para habilitar estas características:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Filters</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Higgs\Test\CIUnitTestCase</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Higgs\Test\FilterTestTrait</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">FooFilterTest</span> <span class="k">extends</span> <span class="nx">CIUnitTestCase</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">FilterTestTrait</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="configuracion">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Configuración</a><a class="headerlink" href="#configuracion" title="Link to this heading"></a></h3>
<p>Debido a la superposición lógica con las pruebas del controlador, <code class="docutils literal notranslate"><span class="pre">FilterTestTrait</span></code> está diseñado para
trabaje junto con <code class="docutils literal notranslate"><span class="pre">ControllerTestTrait</span></code> si necesita ambos en la misma clase.
Una vez que se haya incluido el rasgo, <code class="docutils literal notranslate"><span class="pre">CIUnitTestCase</span></code> detectará su método <code class="docutils literal notranslate"><span class="pre">setUp</span></code> y
Prepare todos los componentes necesarios para sus pruebas. Si necesita una configuración especial
puede modificar cualquiera de las propiedades antes de llamar a los métodos de soporte:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$request</span></code> Una versión preparada del servicio predeterminado <code class="docutils literal notranslate"><span class="pre">IncomingRequest</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$response</span></code> Una versión preparada del servicio predeterminado <code class="docutils literal notranslate"><span class="pre">ResponseInterface</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$filtersConfig</span></code> La configuración predeterminada <code class="docutils literal notranslate"><span class="pre">Config\Filters</span></code> (nota: el descubrimiento lo manejan <code class="docutils literal notranslate"><span class="pre">Filters</span></code>, por lo que esto no incluirá los alias de los módulos)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$filters</span></code> Una instancia de <code class="docutils literal notranslate"><span class="pre">Higgs\Filters\Filters</span></code> usando los tres componentes anteriores</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$collection</span></code> Una versión preparada de <code class="docutils literal notranslate"><span class="pre">RouteCollection</span></code> que incluye el descubrimiento de <code class="docutils literal notranslate"><span class="pre">Config\Routes</span></code></p></li>
</ul>
<p>La configuración predeterminada generalmente será la mejor para sus pruebas, ya que emula mejor
un proyecto «en vivo», pero (por ejemplo) si desea simular un filtro que se activa accidentalmente
en una ruta sin filtrar, puede agregarla a la configuración:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Filters</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Higgs\Test\CIUnitTestCase</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Higgs\Test\FilterTestTrait</span><span class="p">;</span>

<span class="k">final</span> <span class="k">class</span> <span class="nc">FooFilterTest</span> <span class="k">extends</span> <span class="nx">CIUnitTestCase</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">FilterTestTrait</span><span class="p">;</span>

    <span class="k">protected</span> <span class="k">function</span> <span class="nf">testFilterFailsOnAdminRoute</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">filtersConfig</span><span class="o">-&gt;</span><span class="na">globals</span><span class="p">[</span><span class="s1">&#39;before&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;admin-only-filter&#39;</span><span class="p">];</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertHasFilters</span><span class="p">(</span><span class="s1">&#39;unfiltered/route&#39;</span><span class="p">,</span> <span class="s1">&#39;before&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="comprobacion-de-rutas">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Comprobación de rutas</a><a class="headerlink" href="#comprobacion-de-rutas" title="Link to this heading"></a></h3>
<p>El primer método auxiliar es <code class="docutils literal notranslate"><span class="pre">getFiltersForRoute()</span></code> que simulará la ruta proporcionada.
y devolver una lista de todos los filtros (por su alias) que se habrían ejecutado para la posición dada
(«antes» o «después»), sin ejecutar realmente ningún controlador o código de enrutamiento. Esto tiene
una gran ventaja de rendimiento sobre el controlador y las pruebas HTTP.</p>
<dl class="php function">
<dt class="sig sig-object php" id="getFiltersForRoute">
<span class="sig-name descname"><span class="pre">getFiltersForRoute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">$route</span></em>, <em class="sig-param"><span class="pre">$position</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getFiltersForRoute" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parámetros<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>$route</strong> (<span><code class="xref php php-obj docutils literal notranslate"><span class="pre">string</span></code></span>) – El URI a verificar</p></li>
<li><p><strong>$position</strong> (<span><code class="xref php php-obj docutils literal notranslate"><span class="pre">string</span></code></span>) – El método de filtro a verificar, «antes» o «después»</p></li>
</ul>
</dd>
<dt class="field-even">Devuelve<span class="colon">:</span></dt>
<dd class="field-even"><p>Alias para cada filtro que se habría ejecutado</p>
</dd>
<dt class="field-odd">Tipo del valor devuelto<span class="colon">:</span></dt>
<dd class="field-odd"><p><span><code class="xref php php-obj docutils literal notranslate"><span class="pre">cadena[]</span></code></span></p>
</dd>
</dl>
<p>Ejemplo de uso:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getFiltersForRoute</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;after&#39;</span><span class="p">);</span> <span class="c1">// [&#39;toolbar&#39;]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="llamar-a-metodos-de-filtro">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Llamar a métodos de filtro</a><a class="headerlink" href="#llamar-a-metodos-de-filtro" title="Link to this heading"></a></h3>
<p>Las propiedades descritas en Configuración están configuradas para garantizar el máximo rendimiento sin
interferencias o interferencias de otras pruebas. El siguiente método auxiliar devolverá un invocable
método que utiliza estas propiedades para probar su código de filtro de forma segura y verificar los resultados.</p>
<dl class="php function">
<dt class="sig sig-object php" id="getFilterCaller">
<span class="sig-name descname"><span class="pre">getFilterCaller</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">$filter</span></em>, <em class="sig-param"><span class="pre">$position</span></em><span class="sig-paren">)</span><a class="headerlink" href="#getFilterCaller" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parámetros<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>$filter</strong> (<span><code class="xref php php-obj docutils literal notranslate"><span class="pre">FilterInterface|string</span></code></span>) – la instancia, clase o alias del filtro</p></li>
<li><p><strong>$position</strong> (<span><code class="xref php php-obj docutils literal notranslate"><span class="pre">string</span></code></span>) – El método de filtro a ejecutar, «antes» o «después»</p></li>
</ul>
</dd>
<dt class="field-even">Devuelve<span class="colon">:</span></dt>
<dd class="field-even"><p>Un método invocable para ejecutar el evento Filter simulado</p>
</dd>
<dt class="field-odd">Tipo<span class="colon">:</span></dt>
<dd class="field-odd"><p>Cierre</p>
</dd>
</dl>
<p>Ejemplo de uso:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Filters</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Higgs\Test\CIUnitTestCase</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Higgs\Test\FilterTestTrait</span><span class="p">;</span>

<span class="k">final</span> <span class="k">class</span> <span class="nc">FooFilterTest</span> <span class="k">extends</span> <span class="nx">CIUnitTestCase</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">FilterTestTrait</span><span class="p">;</span>

    <span class="k">protected</span> <span class="k">function</span> <span class="nf">testUnauthorizedAccessRedirects</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$caller</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getFilterCaller</span><span class="p">(</span><span class="s1">&#39;permission&#39;</span><span class="p">,</span> <span class="s1">&#39;before&#39;</span><span class="p">);</span>
        <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$caller</span><span class="p">(</span><span class="s1">&#39;MayEditWidgets&#39;</span><span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertInstanceOf</span><span class="p">(</span><span class="s1">&#39;Higgs\HTTP\RedirectResponse&#39;</span><span class="p">,</span> <span class="nv">$result</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Observe cómo el <code class="docutils literal notranslate"><span class="pre">Cierre</span></code> puede tomar parámetros de entrada que se pasan a su método de filtro.</p>
</dd></dl>

</section>
<section id="afirmaciones">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">Afirmaciones</a><a class="headerlink" href="#afirmaciones" title="Link to this heading"></a></h3>
<p>Además de los métodos auxiliares anteriores, <code class="docutils literal notranslate"><span class="pre">FilterTestTrait</span></code> también viene con algunas afirmaciones.
para optimizar sus métodos de prueba.</p>
<section id="afirmarfiltro">
<h4>afirmarfiltro()<a class="headerlink" href="#afirmarfiltro" title="Link to this heading"></a></h4>
<p>El método <code class="docutils literal notranslate"><span class="pre">assertFilter()</span></code> comprueba que la ruta dada en la posición utilice el filtro (por su alias):</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// Make sure users are logged in before checking their account</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertFilter</span><span class="p">(</span><span class="s1">&#39;users/account&#39;</span><span class="p">,</span> <span class="s1">&#39;before&#39;</span><span class="p">,</span> <span class="s1">&#39;login&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="afirmarnotfilter">
<h4>afirmarNotFilter()<a class="headerlink" href="#afirmarnotfilter" title="Link to this heading"></a></h4>
<p>El método <code class="docutils literal notranslate"><span class="pre">assertNotFilter()</span></code> comprueba que la ruta dada en la posición no utilice el filtro (por su alias):</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// Make sure API calls do not try to use the Debug Toolbar</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertNotFilter</span><span class="p">(</span><span class="s1">&#39;api/v1/widgets&#39;</span><span class="p">,</span> <span class="s1">&#39;after&#39;</span><span class="p">,</span> <span class="s1">&#39;toolbar&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="afirmarhasfilters">
<h4>afirmarHasFilters()<a class="headerlink" href="#afirmarhasfilters" title="Link to this heading"></a></h4>
<p>El método <code class="docutils literal notranslate"><span class="pre">assertHasFilters()</span></code> comprueba que la ruta dada en la posición tenga al menos un conjunto de filtros:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// Make sure that filters are enabled</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertHasFilters</span><span class="p">(</span><span class="s1">&#39;filtered/route&#39;</span><span class="p">,</span> <span class="s1">&#39;after&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="afirmarnothasfilters">
<h4>afirmarNotHasFilters()<a class="headerlink" href="#afirmarnothasfilters" title="Link to this heading"></a></h4>
<p>El método <code class="docutils literal notranslate"><span class="pre">assertNotHasFilters()</span></code> comprueba que la ruta dada en la posición no tenga filtros establecidos:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// Make sure no filters run for our static pages</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertNotHasFilters</span><span class="p">(</span><span class="s1">&#39;about/contact&#39;</span><span class="p">,</span> <span class="s1">&#39;before&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pie de página">
        <a href="fabricator.html" class="btn btn-neutral float-left" title="Generando datos de prueba" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
        <a href="feature.html" class="btn btn-neutral float-right" title="Prueba de funciones HTTP" accesskey="n" rel="next">Siguiente <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Derechos de autor 2012-2024 Jose Alexis Correa Valencia.
      <span class="lastupdated">Actualizado por última vez en jun 16, 2024.
      </span></p>
  </div>

  Compilado con <a href="https://www.sphinx-doc.org/">Sphinx</a> usando un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">tema</a>
    proporcionado por <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>