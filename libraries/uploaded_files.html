<!DOCTYPE html>
<html class="writer-html5" lang="es" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trabajar con archivos cargados &mdash; documentación de Higgs - 7.0.2</title>
      <link rel="stylesheet" type="text/css" href="../static/pygments.css?v=67a8c293" />
      <link rel="stylesheet" type="text/css" href="../static/css/citheme.css" />

  
    <link rel="canonical" href="https://higgs.com.co/libraries/uploaded_files.html" />
  <!--[if lt IE 9]>
    <script src="../static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../static/jquery.js?v=5d32c60e"></script>
        <script src="../static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../static/documentation_options.js?v=e20d7d46"></script>
        <script src="../static/doctools.js?v=888ff710"></script>
        <script src="../static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../static/translations.js?v=efdbd0b9"></script>
        <script src="../static/js/citheme.js"></script>
        <script src="../static/js/carbon.js"></script>
    <script src="../static/js/theme.js"></script>
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="next" title="Creando instancias de URI" href="uri.html" />
    <link rel="prev" title="Tipografía" href="typography.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
          </a>
              <div class="version">
                7.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Buscar documentos" aria-label="Buscar documentos" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Bienvenido a Higgs (AI)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/hmvc.html">HMVC (Hierarchical Model-View-Controller)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/psr.html">Cumplimiento de PSR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../license.html">Acuerdo de licencia</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Instalación</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/installing_composer.html">Compositor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/installing_manual.html">Instalación manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/running.html">Ejecutando su aplicación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/troubleshooting.html">Solución de problemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelogs/index.html">Registro de Cambios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/upgrading.html">Actualizaciones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/repositories.html">Repositorios</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Cree su primera aplicación</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/static_pages.html">Páginas estáticas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/news_section.html">Sección de noticias</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/create_news_items.html">Crear noticias</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/conclusion.html">Conclusión</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/index.html">Descripción general del Higgs (AI)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/structure.html">Application Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/mvc.html">Modelos, vistas y controladores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/autoloader.html">Archivos de carga automática</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/services.html">Servicios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/factories.html">Fábricas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/http.html">Trabajar con solicitudes HTTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/security.html">Pautas de seguridad</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../general/index.html">Temas generales</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../general/configuration.html">Configuración en Higgs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/urls.html">URL de Higgs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/helpers.html">Funciones auxiliares</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/common_functions.html">Funciones y constantes globales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/logging.html">Información de registro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/errors.html">Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/caching.html">Almacenamiento en caché de páginas web</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/ajax.html">Solicitudes AJAX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/modules.html">Módulos de código</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/managing_apps.html">Administrar sus aplicaciones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/environments.html">Manejo de múltiples entornos</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../incoming/index.html">Controllers and Routing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../incoming/routing.html">Enrutamiento URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/controllers.html">Controladores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/filters.html">Filtros del controlador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/message.html">Mensajes HTTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/request.html">Solicitar clase</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/incomingrequest.html">IncomingRequest Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/content_negotiation.html">Content Negotiation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/methodspoofing.html">Suplantación de método HTTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/restful.html">Manejo de recursos RESTful</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../outgoing/index.html">Construyendo respuestas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/views.html">Puntos de vista</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_cells.html">Ver celdas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_renderer.html">Ver renderizador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_layouts.html">Ver diseños</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_parser.html">Ver analizador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_decorators.html">Ver decoradores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/table.html">Clase de tabla HTML</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/response.html">HTTP Responses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/api_responses.html">Rasgo de respuesta API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/csp.html">Política de seguridad de contenidos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/localization.html">Localización</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/alternative_php.html">Sintaxis PHP alternativa para ver archivos</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../database/index.html">Trabajar con bases de datos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../database/examples.html">Inicio rápido: ejemplos de uso</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/configuration.html">Configuración de base de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/connecting.html">Conexión a una base de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/queries.html">Ejecución de consultas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/results.html">Generando resultados de consulta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/helpers.html">Funciones auxiliares de consulta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/query_builder.html">Clase de generador de consultas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/transactions.html">Actas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/metadata.html">Obtener metadatos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/call_function.html">Llamadas a funciones personalizadas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/events.html">Eventos de base de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/utilities.html">Utilidades de base de datos</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../models/index.html">Datos de modelado</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../models/model.html">Usando el modelo de Higgs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../models/entities.html">Usando clases de entidad</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dbmgmt/index.html">Administrar bases de datos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/forge.html">Manipulación de bases de datos con Database Forge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/migration.html">Migraciones de bases de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/seeds.html">Siembra de base de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/db_commands.html">Comandos de base de datos</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Referencia de la biblioteca</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="caching.html">Controlador de almacenamiento en caché</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookies.html">Galletas</a></li>
<li class="toctree-l2"><a class="reference internal" href="curlrequest.html">Clase de solicitud CURL</a></li>
<li class="toctree-l2"><a class="reference internal" href="email.html">Clase de correo electrónico</a></li>
<li class="toctree-l2"><a class="reference internal" href="encryption.html">Servicio de cifrado</a></li>
<li class="toctree-l2"><a class="reference internal" href="files.html">Trabajar con archivos</a></li>
<li class="toctree-l2"><a class="reference internal" href="file_collections.html">Colecciones de archivos</a></li>
<li class="toctree-l2"><a class="reference internal" href="honeypot.html">clase de miel</a></li>
<li class="toctree-l2"><a class="reference internal" href="images.html">Clase de manipulación de imágenes</a></li>
<li class="toctree-l2"><a class="reference internal" href="pagination.html">Paginación</a></li>
<li class="toctree-l2"><a class="reference internal" href="publisher.html">Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html">Seguridad</a></li>
<li class="toctree-l2"><a class="reference internal" href="sessions.html">Biblioteca de sesiones</a></li>
<li class="toctree-l2"><a class="reference internal" href="throttler.html">acelerador</a></li>
<li class="toctree-l2"><a class="reference internal" href="time.html">Horarios y fechas</a></li>
<li class="toctree-l2"><a class="reference internal" href="typography.html">Tipografía</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Trabajar con archivos cargados</a></li>
<li class="toctree-l2"><a class="reference internal" href="uri.html">Creando instancias de URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="uri.html#cadenas-uri">Cadenas URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="uri.html#las-partes-de-uri">Las partes de URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="uri.html#segmentos-uri">Segmentos URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="uri.html#deshabilitar-el-lanzamiento-de-excepciones">Deshabilitar el lanzamiento de excepciones</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_agent.html">Clase de agente de usuario</a></li>
<li class="toctree-l2"><a class="reference internal" href="validation.html">Validation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../helpers/index.html">Ayudantes</a><ul class="simple">
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testing/index.html">Pruebas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../testing/overview.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/database.html">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/fabricator.html">Generating Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/controllers.html">Controller Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/feature.html">HTTP Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/response.html">Respuestas de prueba</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/mocking.html">Mocking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/benchmark.html">Evaluación comparativa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/debugging.html">Depurando su aplicación</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Uso de la línea de comando</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_overview.html">Descripción general de la CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_controllers.html">Ejecución de controladores a través de CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/spark_commands.html">Comandos de chispa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_commands.html">Crear comandos Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_generators.html">Generadores CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_library.html">CLI Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_request.html">Clase de solicitud CLI</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../extending/index.html">Higgs extendido</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../extending/core_classes.html">Crear clases de sistema central</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/common.html">Reemplazo de funciones comunes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/events.html">Eventos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/basecontroller.html">Ampliación del controlador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/authentication.html">Autenticación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/composer_packages.html">Crear paquetes de compositor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/contributing.html">Contribuyendo al Higgs</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="official_packages.html">Paquetes Oficiales</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Higgs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Referencia de la biblioteca</a></li>
      <li class="breadcrumb-item active">Trabajar con archivos cargados</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="trabajar-con-archivos-cargados">
<h1>Trabajar con archivos cargados<a class="headerlink" href="#trabajar-con-archivos-cargados" title="Link to this heading"></a></h1>
<p>Higgs hace que trabajar con archivos cargados a través de un formulario sea mucho más simple y seguro que usar <code class="docutils literal notranslate"><span class="pre">$_FILES</span></code> de PHP
matriz directamente. Esto extiende la clase <a class="reference internal" href="files.html"><span class="doc">File</span></a>  y así obtiene todas las características de esa clase.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>This is not the same as the File Uploading class in Higgs v3.x. This provides a raw
Interfaz para los archivos cargados con algunas características pequeñas.</p>
</div>
<nav class="contents local" id="contenido">
<ul class="simple">
<li><p><a class="reference internal" href="#el-proceso" id="id1">El proceso</a></p>
<ul>
<li><p><a class="reference internal" href="#creando-el-formulario-de-carga" id="id2">Creando el formulario de carga</a></p></li>
<li><p><a class="reference internal" href="#la-pagina-del-exito" id="id3">La página del éxito</a></p></li>
<li><p><a class="reference internal" href="#el-controlador" id="id4">El controlador</a></p></li>
<li><p><a class="reference internal" href="#las-rutas" id="id5">Las Rutas</a></p></li>
<li><p><a class="reference internal" href="#el-directorio-de-carga" id="id6">El directorio de carga</a></p></li>
<li><p><a class="reference internal" href="#intentalo" id="id7">¡Intentalo!</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#accediendo-a-archivos" id="id8">Accediendo a archivos</a></p>
<ul>
<li><p><a class="reference internal" href="#todos-los-archivos" id="id9">Todos los archivos</a></p></li>
<li><p><a class="reference internal" href="#fila-india" id="id10">Fila india</a></p></li>
<li><p><a class="reference internal" href="#varios-archivos" id="id11">Varios archivos</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#trabajar-con-el-archivo" id="id12">Trabajar con el archivo</a></p>
<ul>
<li><p><a class="reference internal" href="#verificar-un-archivo" id="id13">Verificar un archivo</a></p></li>
<li><p><a class="reference internal" href="#nombres-de-archivos" id="id14">Nombres de archivos</a></p></li>
<li><p><a class="reference internal" href="#otra-informacion-del-archivo" id="id15">Otra información del archivo</a></p></li>
<li><p><a class="reference internal" href="#mover-archivos" id="id16">Mover archivos</a></p></li>
<li><p><a class="reference internal" href="#almacenar-archivos" id="id17">Almacenar archivos</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="el-proceso">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">El proceso</a><a class="headerlink" href="#el-proceso" title="Link to this heading"></a></h2>
<p>Cargar un archivo implica el siguiente proceso general:</p>
<ul class="simple">
<li><dl class="simple">
<dt>Se muestra un formulario de carga, que permite al usuario seleccionar un archivo y</dt><dd><p>subirlo.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Cuando se envía el formulario, el archivo se carga en el destino.</dt><dd><p>tu específicas.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>A lo largo del camino, el archivo se valida para garantizar que se permita su</dt><dd><p>cargado según las preferencias que establezca.</p>
</dd>
</dl>
</li>
<li><p>Una vez subido, al usuario se le mostrará un mensaje de éxito.</p></li>
</ul>
<p>Para demostrar este proceso aquí hay un breve tutorial. Después podrás
encontrar información de referencia.</p>
<section id="creando-el-formulario-de-carga">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">Creando el formulario de carga</a><a class="headerlink" href="#creando-el-formulario-de-carga" title="Link to this heading"></a></h3>
<p>Usando un editor de texto, cree un formulario llamado <strong>upload_form.php</strong>. En él, coloque
este código y guárdelo en su directorio <strong>app/Views/</strong>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;!</span><span class="nx">DOCTYPE</span> <span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">html</span> <span class="nx">lang</span><span class="o">=</span><span class="s2">&quot;en&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">title</span><span class="o">&gt;</span><span class="nx">Upload</span> <span class="nx">Form</span><span class="o">&lt;/</span><span class="nx">title</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">body</span><span class="o">&gt;</span>

<span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$errors</span> <span class="k">as</span> <span class="nv">$error</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span><span class="cp">&lt;?</span><span class="o">=</span> <span class="nx">esc</span><span class="p">(</span><span class="nv">$error</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endforeach</span> <span class="cp">?&gt;</span>

<span class="cp">&lt;?</span><span class="o">=</span> <span class="nx">form_open_multipart</span><span class="p">(</span><span class="s1">&#39;upload/upload&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;file&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;userfile&quot;</span> <span class="na">size</span><span class="o">=</span><span class="s">&quot;20&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;upload&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Notarás que estamos usando un asistente de formulario para crear la etiqueta de apertura del formulario.
Las cargas de archivos requieren un formulario de varias partes, por lo que el asistente crea el formulario adecuado.
sintaxis para usted. También notarás que tenemos una variable <code class="docutils literal notranslate"><span class="pre">$errors</span></code>. Esto es
para que podamos mostrar mensajes de error en caso de que el usuario haga algo
equivocado.</p>
</section>
<section id="la-pagina-del-exito">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">La página del éxito</a><a class="headerlink" href="#la-pagina-del-exito" title="Link to this heading"></a></h3>
<p>Usando un editor de texto, cree un formulario llamado <strong>upload_success.php</strong>. En eso,
coloque este código y guárdelo en su directorio <strong>app/Views/</strong>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;!</span><span class="nx">DOCTYPE</span> <span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">html</span> <span class="nx">lang</span><span class="o">=</span><span class="s2">&quot;en&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">title</span><span class="o">&gt;</span><span class="nx">Cargar</span> <span class="nx">formulario</span><span class="o">&lt;/</span><span class="nx">title</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">body</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="nx">h3</span><span class="o">&gt;</span><span class="nx">¡Su</span> <span class="nx">archivo</span> <span class="nx">se</span> <span class="nx">cargó</span> <span class="nx">exitosamente</span><span class="o">!&lt;/</span><span class="nx">h3</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;</span><span class="nx">nombre</span><span class="o">:&lt;?=</span> <span class="nx">esc</span><span class="p">(</span><span class="nv">$uploaded_fileinfo</span><span class="o">-&gt;</span> <span class="na">obtenerNombreBase</span><span class="p">())</span> <span class="cp">?&gt;</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>tamaño:<span class="cp">&lt;?</span><span class="o">=</span> <span class="nx">esc</span><span class="p">(</span><span class="nv">$uploaded_fileinfo</span><span class="o">-&gt;</span> <span class="na">getSizeByUnit</span><span class="p">(</span><span class="s1">&#39;kb&#39;</span><span class="p">))</span> <span class="cp">?&gt;</span> KB<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>extensión:<span class="cp">&lt;?</span><span class="o">=</span> <span class="nx">esc</span><span class="p">(</span><span class="nv">$uploaded_fileinfo</span><span class="o">-&gt;</span> <span class="na">SupongoExtensión</span><span class="p">())</span> <span class="cp">?&gt;</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="cp">&lt;?</span><span class="o">=</span> <span class="nx">anchor</span><span class="p">(</span><span class="s1">&#39;upload&#39;</span><span class="p">,</span> <span class="s1">&#39;Upload Another File!&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</section>
<section id="el-controlador">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">El controlador</a><a class="headerlink" href="#el-controlador" title="Link to this heading"></a></h3>
<p>Usando un editor de texto, cree un controlador llamado <strong>Upload.php</strong>. En él, coloque
este código y guárdelo en su directorio <strong>app/Controllers/</strong>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Controllers</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Higgs\Files\File</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Upload</span> <span class="k">extends</span> <span class="nx">BaseController</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$helpers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">];</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;upload_form&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;errors&#39;</span> <span class="o">=&gt;</span> <span class="p">[]]);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">upload</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$validationRule</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;userfile&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
                <span class="s1">&#39;label&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Image File&#39;</span><span class="p">,</span>
                <span class="s1">&#39;rules&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
                    <span class="s1">&#39;uploaded[userfile]&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;is_image[userfile]&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;mime_in[userfile,image/jpg,image/jpeg,image/gif,image/png,image/webp]&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;max_size[userfile,100]&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;max_dims[userfile,1024,768]&#39;</span><span class="p">,</span>
                <span class="p">],</span>
            <span class="p">],</span>
        <span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">validateData</span><span class="p">([],</span> <span class="nv">$validationRule</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$data</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;errors&#39;</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">validator</span><span class="o">-&gt;</span><span class="na">getErrors</span><span class="p">()];</span>

            <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;upload_form&#39;</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$img</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getFile</span><span class="p">(</span><span class="s1">&#39;userfile&#39;</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">$img</span><span class="o">-&gt;</span><span class="na">hasMoved</span><span class="p">())</span> <span class="p">{</span>
            <span class="nv">$filepath</span> <span class="o">=</span> <span class="nx">WRITEPATH</span> <span class="o">.</span> <span class="s1">&#39;uploads/&#39;</span> <span class="o">.</span> <span class="nv">$img</span><span class="o">-&gt;</span><span class="na">store</span><span class="p">();</span>

            <span class="nv">$data</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;uploaded_fileinfo&#39;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">File</span><span class="p">(</span><span class="nv">$filepath</span><span class="p">)];</span>

            <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;upload_success&#39;</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$data</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;errors&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;The file has already been moved.&#39;</span><span class="p">];</span>

        <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;upload_form&#39;</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Since the value of a file upload HTML field doesn’t exist, and is stored in the <code class="docutils literal notranslate"><span class="pre">$_FILES</span></code> global,
Sólo <span class="xref std std-ref">rules-for-file-uploads</span> se puede utilizar para validar el archivo cargado con <a class="reference internal" href="validation.html"><span class="doc">Validation</span></a>.
La regla <code class="docutils literal notranslate"><span class="pre">required</span></code> tampoco se puede usar, así que use <code class="docutils literal notranslate"><span class="pre">uploaded</span></code> en su lugar.</p>
</div>
</section>
<section id="las-rutas">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Las Rutas</a><a class="headerlink" href="#las-rutas" title="Link to this heading"></a></h3>
<p>Usando un editor de texto, abra <strong>app/Config/Routes.php</strong>. En él, agregue las siguientes dos rutas:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// ...</span>

<span class="cm">/*</span>
<span class="cm"> * --------------------------------------------------------------------</span>
<span class="cm"> * Route Definitions</span>
<span class="cm"> * --------------------------------------------------------------------</span>
<span class="cm"> */</span>

<span class="c1">// We get a performance increase by specifying the default</span>
<span class="c1">// route since we don&#39;t have to scan directories.</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;Home::index&#39;</span><span class="p">);</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;upload&#39;</span><span class="p">,</span> <span class="s1">&#39;Upload::index&#39;</span><span class="p">);</span>          <span class="c1">// Add this line.</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;upload/upload&#39;</span><span class="p">,</span> <span class="s1">&#39;Upload::upload&#39;</span><span class="p">);</span> <span class="c1">// Add this line.</span>

<span class="c1">// ...</span>
</pre></div>
</div>
</section>
<section id="el-directorio-de-carga">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">El directorio de carga</a><a class="headerlink" href="#el-directorio-de-carga" title="Link to this heading"></a></h3>
<p>Los archivos cargados se almacenan en el directorio <strong>writable/uploads/</strong>.</p>
</section>
<section id="intentalo">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">¡Intentalo!</a><a class="headerlink" href="#intentalo" title="Link to this heading"></a></h3>
<p>Para probar su formulario, visite su sitio usando una URL similar a esta:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nx">ejemplo</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">index</span><span class="o">.</span><span class="nx">php</span><span class="o">/</span><span class="nx">upload</span><span class="o">/</span>
</pre></div>
</div>
<p>Deberías ver un formulario de carga. Intente cargar un archivo de imagen (ya sea un
<strong>jpg</strong>, <strong>gif</strong>, <strong>png</strong> o <strong>webp</strong>). Si la ruta en su controlador es correcta, debería
trabajar.</p>
</section>
</section>
<section id="accediendo-a-archivos">
<span id="uploaded-files-accessing-files"></span><h2><a class="toc-backref" href="#id8" role="doc-backlink">Accediendo a archivos</a><a class="headerlink" href="#accediendo-a-archivos" title="Link to this heading"></a></h2>
<section id="todos-los-archivos">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Todos los archivos</a><a class="headerlink" href="#todos-los-archivos" title="Link to this heading"></a></h3>
<p>Cuando subes archivos, se puede acceder a ellos de forma nativa en PHP a través del superglobal <code class="docutils literal notranslate"><span class="pre">$_FILES</span></code>. Esta matriz tiene algunos
importantes deficiencias al trabajar con varios archivos cargados a la vez, y tiene posibles fallos de seguridad para muchos desarrolladores
no son conscientes de. Higgs ayuda con ambas situaciones al estandarizar el uso de archivos detrás de un
interfaz común.</p>
<p>Se accede a los archivos a través de la instancia actual <code class="docutils literal notranslate"><span class="pre">IncomingRequest</span></code>. Para recuperar todos los archivos que se cargaron con este
solicitud, utilice <code class="docutils literal notranslate"><span class="pre">getFiles()</span></code>. Esto devolverá una matriz de archivos representados por instancias de <code class="docutils literal notranslate"><span class="pre">Higgs\HTTP\Files\UploadedFile</span></code>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$files</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getFiles</span><span class="p">();</span>
</pre></div>
</div>
<p>Por supuesto, hay varias formas de nombrar la entrada del archivo, y cualquier cosa que no sea la más simple puede generar resultados extraños.
La matriz regresa de la manera esperada. Con el uso más simple, se podría enviar un solo archivo como:</p>
<blockquote>
<div><p>&lt;input type=»file» name=»avatar»&gt;</p>
</div></blockquote>
<p>Lo que devolvería una matriz simple como:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="s1">&#39;avatar&#39;</span> <span class="o">=&gt;</span> <span class="c1">// Instancia de archivo cargado,</span>
<span class="p">];</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>The UploadedFile instance corresponds to <code class="docutils literal notranslate"><span class="pre">$_FILES</span></code>. Even if a user just clicks the submit button and does not upload any file, the instance will still exist. You can check that the file was actually uploaded by the <code class="docutils literal notranslate"><span class="pre">isValid()</span></code> method in UploadedFile. See <a class="reference internal" href="#verify-a-file"><span class="std std-ref">Verificar un archivo</span></a>.</p>
</div>
<p>Si usó una notación de matriz para el nombre, la entrada se vería así:</p>
<blockquote>
<div><p>&lt;input type=»file» name=»my-form[details][avatar]»&gt;</p>
</div></blockquote>
<p>La matriz devuelta por <code class="docutils literal notranslate"><span class="pre">getFiles()</span></code> se parecería más a esto:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
     <span class="s1">&#39;mi-formulario&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;detalles&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="s1">&#39;avatar&#39;</span> <span class="o">=&gt;</span> <span class="c1">// instancia de archivo subido</span>
        <span class="p">],</span>
    <span class="p">],</span>
<span class="p">]</span>
</pre></div>
</div>
<p>En algunos casos, puede especificar una serie de archivos para cargar:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nx">Sube</span> <span class="nx">un</span> <span class="nx">avatar</span><span class="o">:&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;file&quot;</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;my-form[details][avatars][]&quot;</span><span class="o">&gt;</span>
<span class="nx">Sube</span> <span class="nx">un</span> <span class="nx">avatar</span><span class="o">:&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;file&quot;</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;my-form[details][avatars][]&quot;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>En este caso, la matriz de archivos devuelta sería más parecida a:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="s1">&#39;mi-formulario&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;detalles&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="s1">&#39;avatar&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
                <span class="mi">0</span> <span class="o">=&gt;</span> <span class="c1">// Instancia de archivo cargado,</span>
                <span class="mi">1</span> <span class="o">=&gt;</span> <span class="c1">// Instancia de archivo cargado,</span>
            <span class="p">],</span>
        <span class="p">],</span>
    <span class="p">],</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="fila-india">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Fila india</a><a class="headerlink" href="#fila-india" title="Link to this heading"></a></h3>
<p>Si sólo necesita acceder a un único archivo, puede utilizar <code class="docutils literal notranslate"><span class="pre">getFile()</span></code> para recuperar la instancia del archivo directamente. Esto devolverá una instancia de <code class="docutils literal notranslate"><span class="pre">Higgs\HTTP\Files\UploadedFile</span></code>:</p>
<section id="uso-mas-simple">
<h4>Uso más simple<a class="headerlink" href="#uso-mas-simple" title="Link to this heading"></a></h4>
<p>Con el uso más simple, se podría enviar un solo archivo como:</p>
<blockquote>
<div><p>&lt;input type=»file» name=»userfile»&gt;</p>
</div></blockquote>
<p>Lo que devolvería una instancia de archivo simple como:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$file</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getFile</span><span class="p">(</span><span class="s1">&#39;userfile&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="notacion-de-matriz">
<h4>Notación de matriz<a class="headerlink" href="#notacion-de-matriz" title="Link to this heading"></a></h4>
<p>Si usó una notación de matriz para el nombre, la entrada se vería así:</p>
<blockquote>
<div><p>&lt;input type=»file» name=»my-form[details][avatar]»&gt;</p>
</div></blockquote>
<p>Para obtener la instancia del archivo:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$file</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getFile</span><span class="p">(</span><span class="s1">&#39;my-form.details.avatar&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="varios-archivos">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Varios archivos</a><a class="headerlink" href="#varios-archivos" title="Link to this heading"></a></h3>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;file&quot;</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;images[]&quot;</span> <span class="nx">multiple</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>En controlador:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$imagefile</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getFiles</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$imagefile</span><span class="p">[</span><span class="s1">&#39;images&#39;</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$img</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$img</span><span class="o">-&gt;</span><span class="na">isValid</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="nv">$img</span><span class="o">-&gt;</span><span class="na">hasMoved</span><span class="p">())</span> <span class="p">{</span>
            <span class="nv">$newName</span> <span class="o">=</span> <span class="nv">$img</span><span class="o">-&gt;</span><span class="na">getRandomName</span><span class="p">();</span>
            <span class="nv">$img</span><span class="o">-&gt;</span><span class="na">move</span><span class="p">(</span><span class="nx">WRITEPATH</span> <span class="o">.</span> <span class="s1">&#39;uploads&#39;</span><span class="p">,</span> <span class="nv">$newName</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>donde <code class="docutils literal notranslate"><span class="pre">imágenes</span></code> es un bucle desde el nombre del campo del formulario.</p>
<p>Si hay varios archivos con el mismo nombre, puede utilizar <code class="docutils literal notranslate"><span class="pre">getFile()</span></code> para recuperar cada archivo individualmente.</p>
<p>En controlador:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$file1</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getFile</span><span class="p">(</span><span class="s1">&#39;images.0&#39;</span><span class="p">);</span>
<span class="nv">$file2</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getFile</span><span class="p">(</span><span class="s1">&#39;images.1&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Puede que le resulte más fácil utilizar <code class="docutils literal notranslate"><span class="pre">getFileMultiple()</span></code> para obtener una serie de archivos cargados con el mismo nombre:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$files</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getFileMultiple</span><span class="p">(</span><span class="s1">&#39;images&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Otro ejemplo:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nx">Sube</span> <span class="nx">un</span> <span class="nx">avatar</span><span class="o">:&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;file&quot;</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;my-form[details][avatars][]&quot;</span><span class="o">&gt;</span>
<span class="nx">Sube</span> <span class="nx">un</span> <span class="nx">avatar</span><span class="o">:&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;file&quot;</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;my-form[details][avatars][]&quot;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>En controlador:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$file1</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getFile</span><span class="p">(</span><span class="s1">&#39;my-form.details.avatars.0&#39;</span><span class="p">);</span>
<span class="nv">$file2</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getFile</span><span class="p">(</span><span class="s1">&#39;my-form.details.avatars.1&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">getFiles()</span></code> is more appropriate.</p>
</div>
</section>
</section>
<section id="trabajar-con-el-archivo">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Trabajar con el archivo</a><a class="headerlink" href="#trabajar-con-el-archivo" title="Link to this heading"></a></h2>
<p>Una vez que haya recuperado la instancia de UploadedFile, podrá recuperar información sobre el archivo de forma segura, así como
mueva el archivo a una nueva ubicación.</p>
<section id="verificar-un-archivo">
<span id="verify-a-file"></span><h3><a class="toc-backref" href="#id13" role="doc-backlink">Verificar un archivo</a><a class="headerlink" href="#verificar-un-archivo" title="Link to this heading"></a></h3>
<p>Puedes comprobar que un archivo se cargó realmente a través de HTTP sin errores llamando al método <code class="docutils literal notranslate"><span class="pre">isValid()</span></code>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">isValid</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nx">\RuntimeException</span><span class="p">(</span><span class="nv">$file</span><span class="o">-&gt;</span><span class="na">getErrorString</span><span class="p">()</span> <span class="o">.</span> <span class="s1">&#39;(&#39;</span> <span class="o">.</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">getError</span><span class="p">()</span> <span class="o">.</span> <span class="s1">&#39;)&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Como se ve en este ejemplo, si un archivo tuvo un error de carga, puede recuperar el código de error (un número entero) y el error
mensaje con los métodos <code class="docutils literal notranslate"><span class="pre">getError()</span></code> y <code class="docutils literal notranslate"><span class="pre">getErrorString()</span></code>. Los siguientes errores se pueden descubrir a través de
este método:</p>
<ul class="simple">
<li><p>El archivo excede su directiva ini <code class="docutils literal notranslate"><span class="pre">upload_max_filesize</span></code>.</p></li>
<li><p>El archivo excede el límite de carga definido en su formulario.</p></li>
<li><p>El archivo se cargó solo parcialmente.</p></li>
<li><p>Ningun archivo fue subido.</p></li>
<li><p>El archivo no se pudo escribir en el disco.</p></li>
<li><p>No se pudo cargar el archivo: falta el directorio temporal.</p></li>
<li><p>La carga del archivo fue detenida por una extensión PHP.</p></li>
</ul>
</section>
<section id="nombres-de-archivos">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Nombres de archivos</a><a class="headerlink" href="#nombres-de-archivos" title="Link to this heading"></a></h3>
<section id="obtenernombre">
<h4>obtenerNombre()<a class="headerlink" href="#obtenernombre" title="Link to this heading"></a></h4>
<p>Puede recuperar el nombre de archivo original proporcionado por el cliente con el método <code class="docutils literal notranslate"><span class="pre">getName()</span></code>. Este será normalmente el
nombre de archivo enviado por el cliente y no debe ser confiable. Si el archivo se ha movido, esto devolverá el nombre final de
el archivo movido:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$name</span> <span class="o">=</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="obtenernombrecliente">
<h4>obtenerNombreCliente()<a class="headerlink" href="#obtenernombrecliente" title="Link to this heading"></a></h4>
<p>Siempre devuelve el nombre original del archivo cargado tal como lo envió el cliente, incluso si el archivo se ha movido:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$originalName</span> <span class="o">=</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">getClientName</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="gettempname">
<h4>getTempName()<a class="headerlink" href="#gettempname" title="Link to this heading"></a></h4>
<p>Para obtener la ruta completa del archivo temporal que se creó durante la carga, puede utilizar el método <code class="docutils literal notranslate"><span class="pre">getTempName()</span></code>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$tempfile</span> <span class="o">=</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">getTempName</span><span class="p">();</span>
</pre></div>
</div>
</section>
</section>
<section id="otra-informacion-del-archivo">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Otra información del archivo</a><a class="headerlink" href="#otra-informacion-del-archivo" title="Link to this heading"></a></h3>
<section id="obtenerextensioncliente">
<h4>obtenerExtensiónCliente()<a class="headerlink" href="#obtenerextensioncliente" title="Link to this heading"></a></h4>
<p>Devuelve la extensión del archivo original, según el nombre del archivo que se cargó:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$ext</span> <span class="o">=</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">getClientExtension</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>This is NOT a trusted source. For a trusted version, use <code class="docutils literal notranslate"><span class="pre">guessExtension()</span></code> instead.</p>
</div>
</section>
<section id="getclientmimetype">
<h4>getClientMimeType()<a class="headerlink" href="#getclientmimetype" title="Link to this heading"></a></h4>
<p>Devuelve el tipo mime (tipo mime) del archivo proporcionado por el cliente. Este NO es un valor confiable. Para un confiable
versión, use <code class="docutils literal notranslate"><span class="pre">getMimeType()</span></code> en su lugar:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$type</span> <span class="o">=</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">getClientMimeType</span><span class="p">();</span>

<span class="k">echo</span> <span class="nv">$type</span><span class="p">;</span> <span class="c1">// image/png</span>
</pre></div>
</div>
</section>
<section id="obtenerrutacliente">
<h4>obtenerRutaCliente()<a class="headerlink" href="#obtenerrutacliente" title="Link to this heading"></a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Nuevo en la versión 4.4.0.</span></p>
</div>
<p>Devuelve la ruta relativa del <cite>webkit&lt;https://developer.mozilla.org/en-US/docs/Web/API/File/webkitRelativePath&gt;</cite> _ del archivo cargado cuando el cliente ha subido archivos mediante la carga del directorio.
En versiones de PHP inferiores a 8.1, esto devuelve <code class="docutils literal notranslate"><span class="pre">nulo</span></code></p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$clientPath</span> <span class="o">=</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">getClientPath</span><span class="p">();</span>
<span class="k">echo</span> <span class="nv">$clientPath</span><span class="p">;</span> <span class="c1">// dir/file.txt, or dir/sub_dir/file.txt</span>
</pre></div>
</div>
</section>
</section>
<section id="mover-archivos">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Mover archivos</a><a class="headerlink" href="#mover-archivos" title="Link to this heading"></a></h3>
<section id="con-nombre-de-archivo-original">
<h4>con nombre de archivo original<a class="headerlink" href="#con-nombre-de-archivo-original" title="Link to this heading"></a></h4>
<p>Cada archivo se puede mover a su nueva ubicación con el método <code class="docutils literal notranslate"><span class="pre">move()</span></code>, apropiadamente llamado. Esto toma el directorio para moverse.
el archivo como primer parámetro:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$file</span><span class="o">-&gt;</span><span class="na">move</span><span class="p">(</span><span class="nx">WRITEPATH</span> <span class="o">.</span> <span class="s1">&#39;uploads&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>De forma predeterminada, se utilizó el nombre de archivo original.</p>
</section>
<section id="con-nuevo-nombre-de-archivo">
<h4>con nuevo nombre de archivo<a class="headerlink" href="#con-nuevo-nombre-de-archivo" title="Link to this heading"></a></h4>
<p>Puede especificar un nuevo nombre de archivo pasándolo como segundo parámetro:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$newName</span> <span class="o">=</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">getRandomName</span><span class="p">();</span>
<span class="nv">$file</span><span class="o">-&gt;</span><span class="na">move</span><span class="p">(</span><span class="nx">WRITEPATH</span> <span class="o">.</span> <span class="s1">&#39;uploads&#39;</span><span class="p">,</span> <span class="nv">$newName</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="sobrescribir-archivo-existente">
<h4>Sobrescribir archivo existente<a class="headerlink" href="#sobrescribir-archivo-existente" title="Link to this heading"></a></h4>
<p>De forma predeterminada, si el archivo de destino ya existe, se utilizará un nuevo nombre de archivo.
Por ejemplo, si <strong>nombre_imagen.jpg</strong> ya existe en el directorio, entonces el
El nombre del archivo será <strong>nombre_imagen_1.jpg</strong> automáticamente.</p>
<p>Puede sobrescribir el archivo existente pasando <code class="docutils literal notranslate"><span class="pre">true</span></code>
como tercer parámetro:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$file</span><span class="o">-&gt;</span><span class="na">move</span><span class="p">(</span><span class="nx">WRITEPATH</span> <span class="o">.</span> <span class="s1">&#39;uploads&#39;</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="compruebe-si-el-archivo-se-movio">
<h4>Compruebe si el archivo se movió<a class="headerlink" href="#compruebe-si-el-archivo-se-movio" title="Link to this heading"></a></h4>
<p>Una vez que se ha eliminado el archivo, se elimina el archivo temporal. Puedes comprobar si un archivo ya se ha movido con
el método <code class="docutils literal notranslate"><span class="pre">hasMoved()</span></code>, que devuelve un valor booleano:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$file</span><span class="o">-&gt;</span><span class="na">isValid</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">hasMoved</span><span class="p">())</span> <span class="p">{</span>
    <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">move</span><span class="p">(</span><span class="nv">$path</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="cuando-la-mudanza-falla">
<h4>Cuando la mudanza falla<a class="headerlink" href="#cuando-la-mudanza-falla" title="Link to this heading"></a></h4>
<p>Mover un archivo cargado puede fallar, con una excepción HTTP, en varias circunstancias:</p>
<ul class="simple">
<li><p>el archivo ya ha sido movido</p></li>
<li><p>el archivo no se cargó correctamente</p></li>
<li><p>la operación de movimiento de archivos falla (por ejemplo, permisos inadecuados)</p></li>
</ul>
</section>
</section>
<section id="almacenar-archivos">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Almacenar archivos</a><a class="headerlink" href="#almacenar-archivos" title="Link to this heading"></a></h3>
<p>Cada archivo se puede mover a su nueva ubicación con el método <code class="docutils literal notranslate"><span class="pre">store()</span></code>, apropiadamente llamado.</p>
<p>Con el uso más simple, se podría enviar un solo archivo como:</p>
<blockquote>
<div><p>&lt;input type=»file» name=»userfile»&gt;</p>
</div></blockquote>
<p>De forma predeterminada, los archivos cargados se guardan en el directorio <strong>escribible/cargas</strong>. La carpeta <strong>AAAAMMDD</strong>
y se creará un nombre de archivo aleatorio. Devuelve una ruta de archivo:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$path</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getFile</span><span class="p">(</span><span class="s1">&#39;userfile&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">store</span><span class="p">();</span>
</pre></div>
</div>
<p>Puede especificar un directorio al que mover el archivo como primer parámetro. Un nuevo nombre de archivo por
pasándolo como segundo parámetro:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$path</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getFile</span><span class="p">(</span><span class="s1">&#39;userfile&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">store</span><span class="p">(</span><span class="s1">&#39;head_img/&#39;</span><span class="p">,</span> <span class="s1">&#39;user_name.jpg&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Mover un archivo cargado puede fallar, con una <code class="docutils literal notranslate"><span class="pre">HTTPException</span></code>, en varias circunstancias:</p>
<ul class="simple">
<li><p>el archivo ya ha sido movido</p></li>
<li><p>el archivo no se cargó correctamente</p></li>
<li><p>la operación de movimiento de archivos falla (por ejemplo, permisos inadecuados)</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pie de página">
        <a href="typography.html" class="btn btn-neutral float-left" title="Tipografía" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
        <a href="uri.html" class="btn btn-neutral float-right" title="Creando instancias de URI" accesskey="n" rel="next">Siguiente <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Derechos de autor 2012-2025 Jose Alexis Correa Valencia.
      <span class="lastupdated">Actualizado por última vez en feb 16, 2025.
      </span></p>
  </div>

  Compilado con <a href="https://www.sphinx-doc.org/">Sphinx</a> usando un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">tema</a>
    proporcionado por <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>