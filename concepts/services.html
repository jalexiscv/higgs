<!DOCTYPE html>
<html class="writer-html5" lang="es" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Servicios &mdash; documentación de Higgs - 7.0.2</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=67a8c293" />
      <link rel="stylesheet" type="text/css" href="../_static/css/citheme.css?v=d9728d44" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://higgs.com.co/concepts/services.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=e20d7d46"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/translations.js?v=efdbd0b9"></script>
        <script src="../_static/js/citheme.js?v=e0bcfc84"></script>
        <script src="../_static/js/carbon.js?v=693e881e"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="next" title="Fábricas" href="factories.html" />
    <link rel="prev" title="Archivos de carga automática" href="autoloader.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo.svg" class="logo" alt="Logotipo"/>
          </a>
              <div class="version">
                7.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Buscar documentos" aria-label="Buscar documentos" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Bienvenido a Higgs (AI)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/hmvc.html">HMVC (Hierarchical Model-View-Controller)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/psr.html">Cumplimiento de PSR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../license.html">Acuerdo de licencia</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Instalación</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/installing_composer.html">Compositor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/installing_manual.html">Instalación manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/running.html">Ejecutando su aplicación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/troubleshooting.html">Solución de problemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelogs/index.html">Registro de Cambios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/upgrading.html">Actualizaciones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/repositories.html">Repositorios</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Cree su primera aplicación</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/static_pages.html">Páginas estáticas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/news_section.html">Sección de noticias</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/create_news_items.html">Crear noticias</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/conclusion.html">Conclusión</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Descripción general del Higgs (AI)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="structure.html">Application Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="mvc.html">Modelos, vistas y controladores</a></li>
<li class="toctree-l2"><a class="reference internal" href="autoloader.html">Archivos de carga automática</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Servicios</a></li>
<li class="toctree-l2"><a class="reference internal" href="factories.html">Fábricas</a></li>
<li class="toctree-l2"><a class="reference internal" href="http.html">Trabajar con solicitudes HTTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html">Pautas de seguridad</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../general/index.html">Temas generales</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../general/configuration.html">Configuración en Higgs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/urls.html">URL de Higgs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/helpers.html">Funciones auxiliares</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/common_functions.html">Funciones y constantes globales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/logging.html">Información de registro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/errors.html">Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/caching.html">Almacenamiento en caché de páginas web</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/ajax.html">Solicitudes AJAX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/modules.html">Módulos de código</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/managing_apps.html">Administrar sus aplicaciones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/environments.html">Manejo de múltiples entornos</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../incoming/index.html">Controllers and Routing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../incoming/routing.html">Enrutamiento URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/controllers.html">Controladores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/filters.html">Filtros del controlador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/message.html">Mensajes HTTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/request.html">Solicitar clase</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/incomingrequest.html">IncomingRequest Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/content_negotiation.html">Content Negotiation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/methodspoofing.html">Suplantación de método HTTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/restful.html">Manejo de recursos RESTful</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../outgoing/index.html">Construyendo respuestas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/views.html">Puntos de vista</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_cells.html">Ver celdas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_renderer.html">Ver renderizador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_layouts.html">Ver diseños</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_parser.html">Ver analizador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_decorators.html">Ver decoradores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/table.html">Clase de tabla HTML</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/response.html">HTTP Responses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/api_responses.html">Rasgo de respuesta API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/csp.html">Política de seguridad de contenidos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/localization.html">Localización</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/alternative_php.html">Sintaxis PHP alternativa para ver archivos</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../database/index.html">Trabajar con bases de datos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../database/examples.html">Inicio rápido: ejemplos de uso</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/configuration.html">Configuración de base de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/connecting.html">Conexión a una base de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/queries.html">Ejecución de consultas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/results.html">Generando resultados de consulta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/helpers.html">Funciones auxiliares de consulta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/query_builder.html">Clase de generador de consultas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/transactions.html">Actas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/metadata.html">Obtener metadatos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/call_function.html">Llamadas a funciones personalizadas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/events.html">Eventos de base de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/utilities.html">Utilidades de base de datos</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../models/index.html">Datos de modelado</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../models/model.html">Usando el modelo de Higgs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../models/entities.html">Usando clases de entidad</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dbmgmt/index.html">Administrar bases de datos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/forge.html">Manipulación de bases de datos con Database Forge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/migration.html">Migraciones de bases de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/seeds.html">Siembra de base de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/db_commands.html">Comandos de base de datos</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../libraries/index.html">Referencia de la biblioteca</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../libraries/caching.html">Controlador de almacenamiento en caché</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/cookies.html">Galletas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/curlrequest.html">Clase de solicitud CURL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/email.html">Clase de correo electrónico</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/encryption.html">Servicio de cifrado</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/files.html">Trabajar con archivos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/file_collections.html">Colecciones de archivos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/honeypot.html">clase de miel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/images.html">Clase de manipulación de imágenes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/pagination.html">Paginación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/publisher.html">Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/security.html">Seguridad</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/sessions.html">Biblioteca de sesiones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/throttler.html">acelerador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/time.html">Horarios y fechas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/typography.html">Tipografía</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uploaded_files.html">Trabajar con archivos cargados</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uri.html">Creando instancias de URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uri.html#cadenas-uri">Cadenas URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uri.html#las-partes-de-uri">Las partes de URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uri.html#segmentos-uri">Segmentos URI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uri.html#deshabilitar-el-lanzamiento-de-excepciones">Deshabilitar el lanzamiento de excepciones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/user_agent.html">Clase de agente de usuario</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/validation.html">Validation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../helpers/index.html">Ayudantes</a><ul class="simple">
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testing/index.html">Pruebas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../testing/overview.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/database.html">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/fabricator.html">Generating Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/controllers.html">Controller Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/feature.html">HTTP Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/response.html">Respuestas de prueba</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/mocking.html">Mocking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/benchmark.html">Evaluación comparativa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/debugging.html">Depurando su aplicación</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Uso de la línea de comando</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_overview.html">Descripción general de la CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_controllers.html">Ejecución de controladores a través de CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/spark_commands.html">Comandos de chispa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_commands.html">Crear comandos Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_generators.html">Generadores CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_library.html">CLI Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_request.html">Clase de solicitud CLI</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../extending/index.html">Higgs extendido</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../extending/core_classes.html">Crear clases de sistema central</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/common.html">Reemplazo de funciones comunes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/events.html">Eventos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/basecontroller.html">Ampliación del controlador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/authentication.html">Autenticación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/composer_packages.html">Crear paquetes de compositor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/contributing.html">Contribuyendo al Higgs</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../libraries/official_packages.html">Paquetes Oficiales</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Higgs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Descripción general del Higgs (AI)</a></li>
      <li class="breadcrumb-item active">Servicios</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="servicios">
<h1>Servicios<a class="headerlink" href="#servicios" title="Link to this heading"></a></h1>
<nav class="contents local" id="contenido">
<ul class="simple">
<li><p><a class="reference internal" href="#introduccion" id="id1">Introducción</a></p>
<ul>
<li><p><a class="reference internal" href="#que-son-los-servicios" id="id2">¿Qué son los servicios?</a></p></li>
<li><p><a class="reference internal" href="#por-que-utilizar-los-servicios" id="id3">¿Por qué utilizar los Servicios?</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#como-obtener-un-servicio" id="id4">Cómo obtener un servicio</a></p>
<ul>
<li><p><a class="reference internal" href="#obtener-una-nueva-instancia" id="id5">Obtener una nueva instancia</a></p></li>
<li><p><a class="reference internal" href="#funciones-de-conveniencia" id="id6">Funciones de conveniencia</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#definicion-de-servicios" id="id7">Definición de servicios</a></p>
<ul>
<li><p><a class="reference internal" href="#permitir-parametros" id="id8">Permitir parámetros</a></p></li>
<li><p><a class="reference internal" href="#clases-compartidas" id="id9">Clases compartidas</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#descubrimiento-de-servicios" id="id10">Descubrimiento de servicios</a></p></li>
</ul>
</nav>
<section id="introduccion">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Introducción</a><a class="headerlink" href="#introduccion" title="Link to this heading"></a></h2>
<section id="que-son-los-servicios">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">¿Qué son los servicios?</a><a class="headerlink" href="#que-son-los-servicios" title="Link to this heading"></a></h3>
<p>Los <strong>Servicios</strong> en Higgs proporcionan la funcionalidad para crear y compartir nuevas instancias de clase.
Se implementa como la clase <code class="docutils literal notranslate"><span class="pre">Config\Services</span></code>.</p>
<p>Todas las clases principales de Higgs se proporcionan como «servicios». Esto simplemente significa que, en lugar de
de codificar un nombre de clase para cargar, las clases a llamar se definen dentro de un
archivo de configuración. Este archivo actúa como un tipo de fábrica para crear nuevas instancias de la clase requerida.</p>
</section>
<section id="por-que-utilizar-los-servicios">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">¿Por qué utilizar los Servicios?</a><a class="headerlink" href="#por-que-utilizar-los-servicios" title="Link to this heading"></a></h3>
<p>Un ejemplo rápido probablemente aclarará las cosas, así que imagina que necesitas extraer una instancia
de la clase Temporizador. El método más sencillo sería simplemente crear una nueva instancia de esa clase:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$timer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Higgs\Debug\Timer</span><span class="p">();</span>
</pre></div>
</div>
<p>Y esto funciona muy bien. Hasta que decida que desea utilizar una clase de temporizador diferente en su lugar.
Quizás este tenga algunos informes avanzados que el temporizador predeterminado no proporciona. Para hacer esto,
ahora debe ubicar todas las ubicaciones en su aplicación en las que utilizó la clase de temporizador.
Dado que es posible que los haya dejado en su lugar para mantener un registro de rendimiento de su aplicación constantemente
en ejecución, esta podría ser una manera de manejar esto que requiere mucho tiempo y es propensa a errores. Ahí es donde los servicios
Ser util.</p>
<p>En lugar de crear la instancia nosotros mismos, dejamos que una clase central cree una instancia del
clase para nosotros. Esta clase se mantiene muy simple. Solo contiene un método para cada clase que queramos.
para utilizar como servicio. El método normalmente devuelve una <strong>instancia compartida</strong> de esa clase, pasando cualquier dependencia
podría tener en ello. Luego, reemplazaríamos nuestro código de creación del temporizador con un código que llame a esta nueva clase:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$timer</span> <span class="o">=</span> <span class="nx">\Config\Services</span><span class="o">::</span><span class="na">timer</span><span class="p">();</span>
</pre></div>
</div>
<p>Cuando necesite cambiar la implementación utilizada, puede modificar el archivo de configuración de servicios y
el cambio ocurre automáticamente en toda su aplicación sin que usted tenga que hacer nada. Ahora
sólo necesita aprovechar cualquier funcionalidad nueva y listo. Muy simple y
resistente a errores.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>It is recommended to only create services within controllers. Other files, like models and libraries should have the dependencies either passed into the constructor or through a setter method.</p>
</div>
</section>
</section>
<section id="como-obtener-un-servicio">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Cómo obtener un servicio</a><a class="headerlink" href="#como-obtener-un-servicio" title="Link to this heading"></a></h2>
<p>Como muchas clases de Higgs se brindan como servicios, puede obtenerlas de la siguiente manera:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$typography</span> <span class="o">=</span> <span class="nx">\Config\Services</span><span class="o">::</span><span class="na">typography</span><span class="p">();</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">$typography</span></code> es una instancia de la clase Typography, y si llamas a <code class="docutils literal notranslate"><span class="pre">\Config\Services::typography()</span></code> nuevamente, obtendrás exactamente la misma instancia.</p>
<p>Los Servicios normalmente devuelven una <strong>instancia compartida</strong> de la clase. El siguiente código crea una instancia <code class="docutils literal notranslate"><span class="pre">CURLRequest</span></code> en la primera llamada. Y la segunda llamada devuelve exactamente la misma instancia.</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$options1</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;baseURI&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;http://example.com/api/v1/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;timeout&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">];</span>
<span class="nv">$client1</span> <span class="o">=</span> <span class="nx">\Config\Services</span><span class="o">::</span><span class="na">curlrequest</span><span class="p">(</span><span class="nv">$options1</span><span class="p">);</span>

<span class="nv">$options2</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;baseURI&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;http://another.example.com/api/v2/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;timeout&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
<span class="p">];</span>
<span class="nv">$client2</span> <span class="o">=</span> <span class="nx">\Config\Services</span><span class="o">::</span><span class="na">curlrequest</span><span class="p">(</span><span class="nv">$options2</span><span class="p">);</span>
<span class="c1">// $options2 does not work.</span>
<span class="c1">// $client2 is the exactly same instance as $client1.</span>
</pre></div>
</div>
<p>Por lo tanto, el parámetro <code class="docutils literal notranslate"><span class="pre">$options2</span></code> para <code class="docutils literal notranslate"><span class="pre">$client2</span></code> no funciona. Simplemente se ignora.</p>
<section id="obtener-una-nueva-instancia">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Obtener una nueva instancia</a><a class="headerlink" href="#obtener-una-nueva-instancia" title="Link to this heading"></a></h3>
<p>Si desea obtener una nueva instancia de la clase Typography, debe pasar <code class="docutils literal notranslate"><span class="pre">false</span></code> al argumento <code class="docutils literal notranslate"><span class="pre">$getShared</span></code>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$typography</span> <span class="o">=</span> <span class="nx">\Config\Services</span><span class="o">::</span><span class="na">typography</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="funciones-de-conveniencia">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Funciones de conveniencia</a><a class="headerlink" href="#funciones-de-conveniencia" title="Link to this heading"></a></h3>
<p>Se han proporcionado dos funciones para obtener un servicio. Estas funciones están siempre disponibles.</p>
<section id="servicio">
<h4>servicio()<a class="headerlink" href="#servicio" title="Link to this heading"></a></h4>
<p>El primero es <code class="docutils literal notranslate"><span class="pre">servicio()</span></code> que devuelve una nueva instancia del servicio solicitado. El único
El parámetro requerido es el nombre del servicio. Este es el mismo que el nombre del método dentro de los Servicios.
El archivo siempre devuelve una instancia COMPARTIDA de la clase, por lo que llamar a la función varias veces debería
siempre devuelve la misma instancia:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$logger</span> <span class="o">=</span> <span class="nx">service</span><span class="p">(</span><span class="s1">&#39;logger&#39;</span><span class="p">);</span>

<span class="c1">// The code above is the same as the code below.</span>
<span class="nv">$logger</span> <span class="o">=</span> <span class="nx">\Config\Services</span><span class="o">::</span><span class="na">logger</span><span class="p">();</span>
</pre></div>
</div>
<p>Si el método de creación requiere parámetros adicionales, se pueden pasar después del nombre del servicio:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$renderer</span> <span class="o">=</span> <span class="nx">service</span><span class="p">(</span><span class="s1">&#39;renderer&#39;</span><span class="p">,</span> <span class="nx">APPPATH</span> <span class="o">.</span> <span class="s1">&#39;views/&#39;</span><span class="p">);</span>

<span class="c1">// The code above is the same as the code below.</span>
<span class="nv">$renderer</span> <span class="o">=</span> <span class="nx">\Config\Services</span><span class="o">::</span><span class="na">renderer</span><span class="p">(</span><span class="nx">APPPATH</span> <span class="o">.</span> <span class="s1">&#39;views/&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="servicio-unico">
<h4>servicio_único()<a class="headerlink" href="#servicio-unico" title="Link to this heading"></a></h4>
<p>La segunda función, <code class="docutils literal notranslate"><span class="pre">single_service()</span></code> funciona igual que <code class="docutils literal notranslate"><span class="pre">service()</span></code> pero devuelve una nueva instancia de
la clase:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$logger</span> <span class="o">=</span> <span class="nx">single_service</span><span class="p">(</span><span class="s1">&#39;logger&#39;</span><span class="p">);</span>

<span class="c1">// The code above is the same as the code below.</span>
<span class="nv">$logger</span> <span class="o">=</span> <span class="nx">\Config\Services</span><span class="o">::</span><span class="na">logger</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="definicion-de-servicios">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Definición de servicios</a><a class="headerlink" href="#definicion-de-servicios" title="Link to this heading"></a></h2>
<p>Para que los servicios funcionen bien, debe poder confiar en que cada clase tenga una API constante, o
<cite>interfaz&lt;https://www.php.net/manual/en/language.oop5.interfaces.php&gt;</cite> _, usar. Casi todo de
Las clases de Higgs proporcionan una interfaz a la que se adhieren. Cuando desea ampliar o reemplazar
clases principales, solo necesita asegurarse de cumplir con los requisitos de la interfaz y saber que
Las clases son compatibles.</p>
<p>Por ejemplo, la clase <code class="docutils literal notranslate"><span class="pre">RouteCollection</span></code> implementa <code class="docutils literal notranslate"><span class="pre">RouteCollectionInterface</span></code>. Cuando usted
Si desea crear un reemplazo que proporcione una forma diferente de crear rutas, solo necesita
cree una nueva clase que implemente <code class="docutils literal notranslate"><span class="pre">RouteCollectionInterface</span></code>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Router</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Higgs\Router\RouteCollectionInterface</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MyRouteCollection</span> <span class="k">implements</span> <span class="nx">RouteCollectionInterface</span>
<span class="p">{</span>
    <span class="c1">// Implement required methods here.</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Finalmente, agregue el método <code class="docutils literal notranslate"><span class="pre">routes()</span></code> a <strong>app/Config/Services.php</strong> para crear una nueva instancia de <code class="docutils literal notranslate"><span class="pre">MyRouteCollection</span></code>
en lugar de <code class="docutils literal notranslate"><span class="pre">Higgs\Router\RouteCollection</span></code>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">Config</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Higgs\Config\BaseService</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Services</span> <span class="k">extends</span> <span class="nx">BaseService</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">routes</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">\App\Router\MyRouteCollection</span><span class="p">(</span><span class="k">static</span><span class="o">::</span><span class="na">locator</span><span class="p">(),</span> <span class="nx">config</span><span class="p">(</span><span class="s1">&#39;Modules&#39;</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<section id="permitir-parametros">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Permitir parámetros</a><a class="headerlink" href="#permitir-parametros" title="Link to this heading"></a></h3>
<p>En algunos casos, querrás tener la opción de pasar una configuración a la clase durante la creación de instancias.
Dado que el archivo de servicios es una clase muy simple, es fácil hacer que esto funcione.</p>
<p>Un buen ejemplo es el servicio <code class="docutils literal notranslate"><span class="pre">renderizador</span></code>. Por defecto, queremos que esta clase pueda
para encontrar las vistas en <code class="docutils literal notranslate"><span class="pre">APPPATH.</span> <span class="pre">'vistas/'</span></code>. Queremos que el desarrollador tenga la opción de
Sin embargo, cambiarán ese camino si sus necesidades así lo requieren. Entonces la clase acepta <code class="docutils literal notranslate"><span class="pre">$viewPath</span></code>
como parámetro del constructor. El método de servicio se ve así:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">Config</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Higgs\Config\BaseService</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Services</span> <span class="k">extends</span> <span class="nx">BaseService</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">renderer</span><span class="p">(</span><span class="nv">$viewPath</span> <span class="o">=</span> <span class="nx">APPPATH</span> <span class="o">.</span> <span class="s1">&#39;views/&#39;</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">\Higgs\View\View</span><span class="p">(</span><span class="nv">$viewPath</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Esto establece la ruta predeterminada en el método constructor, pero permite cambiar fácilmente
la ruta que utiliza:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$renderer</span> <span class="o">=</span> <span class="nx">\Config\Services</span><span class="o">::</span><span class="na">renderer</span><span class="p">(</span><span class="s1">&#39;/shared/views/&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="clases-compartidas">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Clases compartidas</a><a class="headerlink" href="#clases-compartidas" title="Link to this heading"></a></h3>
<p>Hay ocasiones en las que es necesario exigir que solo se ejecute una única instancia de un servicio.
es creado. Esto se maneja fácilmente con el método <code class="docutils literal notranslate"><span class="pre">getSharedInstance()</span></code> que se llama desde dentro del
método de fábrica. Esto se encarga de comprobar si se ha creado y guardado una instancia.
dentro de la clase y, si no, crea una nueva. Todos los métodos de fábrica proporcionan una
Valor <code class="docutils literal notranslate"><span class="pre">$getShared</span> <span class="pre">=</span> <span class="pre">true</span></code> como último parámetro. También debes seguir el método:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">Config</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Higgs\Config\BaseService</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Services</span> <span class="k">extends</span> <span class="nx">BaseService</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">routes</span><span class="p">(</span><span class="nv">$getShared</span> <span class="o">=</span> <span class="k">true</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$getShared</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">static</span><span class="o">::</span><span class="na">getSharedInstance</span><span class="p">(</span><span class="s1">&#39;routes&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nx">\App\Router\MyRouteCollection</span><span class="p">(</span><span class="k">static</span><span class="o">::</span><span class="na">locator</span><span class="p">(),</span> <span class="nx">config</span><span class="p">(</span><span class="s1">&#39;Modules&#39;</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="descubrimiento-de-servicios">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Descubrimiento de servicios</a><a class="headerlink" href="#descubrimiento-de-servicios" title="Link to this heading"></a></h2>
<p>Higgs puede descubrir automáticamente cualquier archivo <strong>Config/Services.php</strong> que haya creado dentro de cualquier espacio de nombres definido.
Esto permite un uso sencillo de cualquier archivo de servicios de módulo. Para que se descubran archivos de servicios personalizados, deben
cumplir con estos requisitos:</p>
<ul class="simple">
<li><p>Su espacio de nombres debe estar definido en <strong>app/Config/Autoload.php</strong></p></li>
<li><p>Dentro del espacio de nombres, el archivo debe encontrarse en <strong>Config/Services.php</strong></p></li>
<li><p>Debe extender <code class="docutils literal notranslate"><span class="pre">Higgs\Config\BaseService</span></code></p></li>
</ul>
<p>Un pequeño ejemplo debería aclarar esto.</p>
<p>Imagine que ha creado un nuevo directorio, <strong>Blog</strong> en el directorio raíz de su proyecto. Esto contendrá un <strong>módulo de blog</strong> con controladores,
modelos, etc., y le gustaría que algunas de las clases estén disponibles como servicio. El primer paso es crear un nuevo archivo:</p>
<p><strong>Blog/Config/Services.php</strong>. El esqueleto del archivo debería ser:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">Blog\Config</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Higgs\Config\BaseService</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Services</span> <span class="k">extends</span> <span class="nx">BaseService</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">postManager</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Ahora puede utilizar este archivo como se describe anteriormente. Cuando quieras tomar el servicio de publicaciones desde cualquier controlador,
simplemente usaría la clase <code class="docutils literal notranslate"><span class="pre">Config\Services</span></code> del framework para obtener su servicio:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$postManager</span> <span class="o">=</span> <span class="nx">\Config\Services</span><span class="o">::</span><span class="na">postManager</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>If multiple Services files have the same method name, the first one found will be the instance returned.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pie de página">
        <a href="autoloader.html" class="btn btn-neutral float-left" title="Archivos de carga automática" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
        <a href="factories.html" class="btn btn-neutral float-right" title="Fábricas" accesskey="n" rel="next">Siguiente <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Derechos de autor 2012-2024 Jose Alexis Correa Valencia.
      <span class="lastupdated">Actualizado por última vez en jun 16, 2024.
      </span></p>
  </div>

  Compilado con <a href="https://www.sphinx-doc.org/">Sphinx</a> usando un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">tema</a>
    proporcionado por <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>